<!-- saved from url=(0014)about:internet -->
<pre class="code">
<span class="srcline"><span class="lineno"><a href="1,1" id="srcline1">  1</a></span><span class="line"><span class="keyword">function</span> [<span class="var type1" id="S2T1U3">olho_mat</span>,<span class="var type1" id="S3T1U4">tn</span>,<span class="var type1" id="S4T2U5">Olho_Aber</span>,<span class="var type1" id="S5T2U6">Aber_Lhi</span>,<span class="var type1" id="S6T2U7">Aber_Llow</span>] = Olho(<span class="var type1" id="S7T3U10">Dados</span>,<span class="var type1" id="S8T2U11">t_simb</span>,<span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,2" id="srcline2">  2</a></span><span class="line">                                                      <span class="var type1" id="S9T2U12">n_amos_p_sim</span>,<span class="var type1" id="S10T2U13">ploting</span>,<span class="var type1" id="S11T2U14">tmax</span>)</span></span>
<span class="srcline"><span class="lineno"><a href="1,3" id="srcline3">  3</a></span><span class="line"><span class="comment">%%           Creating the Eye Diagram of one electrical signals.  </span></span></span>
<span class="srcline"><span class="lineno"><a href="1,4" id="srcline4">  4</a></span><span class="line"><span class="comment">%c function [olho_mat,tn,Olho_Aber,Aber_Lhi,Aber_Llow] = Olho(Dados,<span class="keyword">...</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,5" id="srcline5">  5</a></span><span class="line"><span class="comment">%c                                             t_simb,n_amos_p_sim,ploting)</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,6" id="srcline6">  6</a></span><span class="line"><span class="comment">%c</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,7" id="srcline7">  7</a></span><span class="line"><span class="comment">%c</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,8" id="srcline8">  8</a></span><span class="line"><span class="comment">%c This function is resposible for generating the eye diagram of an given</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,9" id="srcline9">  9</a></span><span class="line"><span class="comment">%c signal.</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,10" id="srcline10"> 10</a></span><span class="line"><span class="comment">%c</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,11" id="srcline11"> 11</a></span><span class="line"><span class="comment">%c</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,12" id="srcline12"> 12</a></span><span class="line"><span class="comment">%c                                           Created by P.Marciano LG</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,13" id="srcline13"> 13</a></span><span class="line"><span class="comment">%c                                           22/11/2016</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,14" id="srcline14"> 14</a></span><span class="line"><span class="comment">%c                                           07/01/2018</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,15" id="srcline15"> 15</a></span><span class="line"><span class="comment">%c                                           pablorafael.mcx@gmail.com</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,16" id="srcline16"> 16</a></span><span class="line"><span class="comment">%c</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,17" id="srcline17"> 17</a></span><span class="line"><span class="comment">%c </span></span></span>
<span class="srcline"><span class="lineno"><a href="1,18" id="srcline18"> 18</a></span><span class="line"><span class="comment">%c</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,19" id="srcline19"> 19</a></span><span class="line"><span class="comment">%c%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,20" id="srcline20"> 20</a></span><span class="line"><span class="comment">%c                    G L O B A L  V A R I A B L E S                      %</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,21" id="srcline21"> 21</a></span><span class="line"><span class="comment">%c%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,22" id="srcline22"> 22</a></span><span class="line"><span class="comment">%c</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,23" id="srcline23"> 23</a></span><span class="line"><span class="comment">%c%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,24" id="srcline24"> 24</a></span><span class="line"><span class="comment">%c                   L I S T  O F  V A R I A B L E S                      %</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,25" id="srcline25"> 25</a></span><span class="line"><span class="comment">%c%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,26" id="srcline26"> 26</a></span><span class="line"><span class="comment">%c</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,27" id="srcline27"> 27</a></span><span class="line"><span class="comment">%c    Olho</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,28" id="srcline28"> 28</a></span><span class="line"><span class="comment">%c</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,29" id="srcline29"> 29</a></span><span class="line"><span class="comment">%c  Input:</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,30" id="srcline30"> 30</a></span><span class="line"><span class="comment">%c  Dados        : The complete tada to be evaluated                    [b]</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,31" id="srcline31"> 31</a></span><span class="line"><span class="comment">%c  t_simb       : The time period of one symbol                        [s]</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,32" id="srcline32"> 32</a></span><span class="line"><span class="comment">%c  n_amos_p_sim : The number of samples per symbol                  [samp]</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,33" id="srcline33"> 33</a></span><span class="line"><span class="comment">%c  ploting      : Control variable to plot or not the eye diagram withing</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,34" id="srcline34"> 34</a></span><span class="line"><span class="comment">%c                 this fucntion                                   [bolean]</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,35" id="srcline35"> 35</a></span><span class="line"><span class="comment">%c  </span></span></span>
<span class="srcline"><span class="lineno"><a href="1,36" id="srcline36"> 36</a></span><span class="line"><span class="comment">%c  Output:</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,37" id="srcline37"> 37</a></span><span class="line"><span class="comment">%c  olho_mat     : Matriz with the eye diagram stored                   [u]</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,38" id="srcline38"> 38</a></span><span class="line"><span class="comment">%c  tn           : Time vector for ploting the Eye Diagram outside this</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,39" id="srcline39"> 39</a></span><span class="line"><span class="comment">%c                 function                                             [s] </span></span></span>
<span class="srcline"><span class="lineno"><a href="1,40" id="srcline40"> 40</a></span><span class="line"><span class="comment">%c  Olho_Aber    : Statical information about the Eye Opening           [u]</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,41" id="srcline41"> 41</a></span><span class="line"><span class="comment">%c  Aber_Lhi     : Statical information about the Eye highest point     [u]</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,42" id="srcline42"> 42</a></span><span class="line"><span class="comment">%c  Aber_Llow    : Statical information about the Eye lowest point      [u]</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,43" id="srcline43"> 43</a></span><span class="line"><span class="comment">%c  </span></span></span>
<span class="srcline"><span class="lineno"><a href="1,44" id="srcline44"> 44</a></span><span class="line"><span class="comment">%c</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,45" id="srcline45"> 45</a></span><span class="line"><span class="comment">%c%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,46" id="srcline46"> 46</a></span><span class="line"><span class="comment">%c                             S T R U C T S                              %</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,47" id="srcline47"> 47</a></span><span class="line"><span class="comment">%c%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,48" id="srcline48"> 48</a></span><span class="line"><span class="comment">%c</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,49" id="srcline49"> 49</a></span><span class="line"><span class="comment">%%                       Initializing</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,50" id="srcline50"> 50</a></span><span class="line"><span class="comment">%% Recovering the main iformation about the income signal</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,51" id="srcline51"> 51</a></span><span class="line"><span class="keyword">if</span> <span class="mxinfo " id="T4:U11"><span class="mxinfo " id="T2:U12">nargin</span>&lt;<span class="mxinfo " id="T2:U13">4</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,52" id="srcline52"> 52</a></span><span class="line">    error(<span class="string">'Not enough input arguments.'</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="1,53" id="srcline53"> 53</a></span><span class="line"><span class="keyword">elseif</span> <span class="mxinfo " id="T4:U14"><span class="mxinfo " id="T2:U15">nargin</span>&lt;<span class="mxinfo " id="T2:U16">5</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,54" id="srcline54"> 54</a></span><span class="line">    <span class="var type0" id="S11T0U32">tmax</span> = 1;</span></span>
<span class="srcline"><span class="lineno"><a href="1,55" id="srcline55"> 55</a></span><span class="line"><span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,56" id="srcline56"> 56</a></span><span class="line">    </span></span>
<span class="srcline"><span class="lineno"><a href="1,57" id="srcline57"> 57</a></span><span class="line"><span class="mxinfo " id="T2:U17"><span class="var type1" id="S14T2U36">Dmax</span>  = <span class="mxinfo " id="T2:U19">max(<span class="var type1" id="S7T3U39">Dados</span>)</span></span>;                                                        <span class="comment">%Variable used to limit the ploting at the maximum point</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,58" id="srcline58"> 58</a></span><span class="line"><span class="mxinfo " id="T2:U21"><span class="var type1" id="S16T2U42">Dmin</span>  = <span class="mxinfo " id="T2:U23">min(<span class="var type1" id="S7T3U45">Dados</span>)</span></span>;                                                        <span class="comment">%Variable used to limit the ploting at the minimum point</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,59" id="srcline59"> 59</a></span><span class="line"><span class="mxinfo " id="T2:U25"><span class="var type1" id="S18T2U48">tam</span>   = <span class="mxinfo " id="T2:U27">length(<span class="var type1" id="S7T3U51">Dados</span>)</span></span>;                                                     <span class="comment">%Recovering the size of the income information</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,60" id="srcline60"> 60</a></span><span class="line"><span class="mxinfo " id="T2:U29"><span class="var type1" id="S20T2U54">N_sim</span> = <span class="mxinfo " id="T2:U31"><span class="var type1" id="S18T2U56">tam</span>/<span class="var type1" id="S9T2U57">n_amos_p_sim</span></span></span>;                                                  <span class="comment">%Recovering the number of Symbols withing the information</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,61" id="srcline61"> 61</a></span><span class="line"><span class="mxinfo " id="T2:U34"><span class="var type1" id="S21T2U60">tf</span>    = <span class="mxinfo " id="T2:U36"><span class="var type1" id="S20T2U62">N_sim</span>*<span class="var type1" id="S8T2U63">t_simb</span></span></span>;                                                      <span class="comment">%Estimating the final time of this signal</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,62" id="srcline62"> 62</a></span><span class="line"><span class="mxinfo " id="T3:U39"><span class="var type1" id="S22T3U66">t</span>     = <span class="mxinfo " id="T3:U41">linspace(0,<span class="var type1" id="S21T2U70">tf</span>,<span class="var type1" id="S18T2U71">tam</span>)</span></span>;                                                <span class="comment">%Recovering the time vector of the income signal</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,63" id="srcline63"> 63</a></span><span class="line"><span class="mxinfo " id="T2:U44"><span class="var type1" id="S24T2U74">ta</span>    = <span class="mxinfo " id="T2:U46"><span class="mxinfo " id="T2:U47"><span class="var type1" id="S22T3U77">t</span>(<span class="mxinfo " id="T2:U49">2</span>)</span>-<span class="mxinfo " id="T2:U50"><span class="var type1" id="S22T3U80">t</span>(<span class="mxinfo " id="T2:U52">1</span>)</span></span></span>;                                                         <span class="comment">%Recovering the sampling ratio of this signal</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,64" id="srcline64"> 64</a></span><span class="line"><span class="comment">%% Seting variables for controling the spliting to the income signal</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,65" id="srcline65"> 65</a></span><span class="line"><span class="comment">% tmax  = 3;                                                                 %Seting the number eyes to be plot</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,66" id="srcline66"> 66</a></span><span class="line"><span class="keyword">if</span> <span class="mxinfo " id="T4:U53"><span class="var type1" id="S20T2U85">N_sim</span> &lt;= <span class="var type1" id="S11T2U86">tmax</span></span>                                                           <span class="comment">%If the income signal just have one symbel just one eye will be plot</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,67" id="srcline67"> 67</a></span><span class="line">    <span class="mxinfo " id="T2:U56"><span class="var type1" id="S25T2U89">n_plot</span> = <span class="mxinfo " id="T2:U58">1</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,68" id="srcline68"> 68</a></span><span class="line"><span class="keyword">else</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,69" id="srcline69"> 69</a></span><span class="line">    <span class="comment">%Otherwise, we need to calculate the number of samples needed to be</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,70" id="srcline70"> 70</a></span><span class="line">    <span class="comment">%taken to create the eye diagram accordingly with the previous</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,71" id="srcline71"> 71</a></span><span class="line">    <span class="comment">%especified.</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,72" id="srcline72"> 72</a></span><span class="line">    <span class="mxinfo " id="T2:U59"><span class="var type1" id="S25T2U94">n_plot</span> = <span class="mxinfo " id="T2:U61"><span class="var type1" id="S18T2U96">tam</span>/(<span class="mxinfo " id="T2:U63"><span class="var type1" id="S11T2U99">tmax</span>*<span class="var type1" id="S9T2U100">n_amos_p_sim</span></span>)</span></span>;                                      <span class="comment">%taking the number of samples needed</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,73" id="srcline73"> 73</a></span><span class="line">    <span class="comment">%Because of reasons, the number of samples may not be multiple of the</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,74" id="srcline74"> 74</a></span><span class="line">    <span class="comment">%number of eyes requested for ploting hence, it must be downsizes to</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,75" id="srcline75"> 75</a></span><span class="line">    <span class="comment">%the minimal of one eye to be ploted.</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,76" id="srcline76"> 76</a></span><span class="line">    <span class="keyword">while</span> <span class="mxinfo " id="T2:U66">mod(<span class="var type1" id="S18T2U104">tam</span>,(<span class="mxinfo " id="T2:U68"><span class="var type1" id="S11T2U107">tmax</span>*<span class="var type1" id="S9T2U108">n_amos_p_sim</span></span>))</span>                                     <span class="comment">%Checking if the number of samples is divisible by the number of eyes to be plot         </span></span></span>
<span class="srcline"><span class="lineno"><a href="1,77" id="srcline77"> 77</a></span><span class="line">        <span class="mxinfo " id="T2:U71"><span class="var type1" id="S11T2U111">tmax</span> = <span class="mxinfo " id="T2:U73"><span class="var type1" id="S11T2U113">tmax</span> - <span class="mxinfo " id="T2:U75">1</span></span></span>;                                                   <span class="comment">%If not, reduz the number of eyes by one unity</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,78" id="srcline78"> 78</a></span><span class="line">        <span class="mxinfo " id="T2:U76"><span class="var type1" id="S25T2U117">n_plot</span> = <span class="mxinfo " id="T2:U78"><span class="var type1" id="S18T2U119">tam</span>/(<span class="mxinfo " id="T2:U80"><span class="var type1" id="S11T2U122">tmax</span>*<span class="var type1" id="S9T2U123">n_amos_p_sim</span></span>)</span></span>;                                  <span class="comment">%Recalculate the number of samples needed to be taken</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,79" id="srcline79"> 79</a></span><span class="line">    <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,80" id="srcline80"> 80</a></span><span class="line"><span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,81" id="srcline81"> 81</a></span><span class="line"><span class="comment">%% Resizing the income signal for ploting</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,82" id="srcline82"> 82</a></span><span class="line"><span class="mxinfo " id="T2:U83"><span class="var type1" id="S27T2U126">nlin</span>     = <span class="mxinfo " id="T2:U85"><span class="var type1" id="S11T2U128">tmax</span>*<span class="var type1" id="S9T2U129">n_amos_p_sim</span></span></span>;                                              <span class="comment">%Setting the number of lines of the new matriz</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,83" id="srcline83"> 83</a></span><span class="line"><span class="mxinfo " id="T2:U88"><span class="var type1" id="S28T2U132">ncol</span>     = <span class="var type1" id="S25T2U133">n_plot</span></span>;                                                         <span class="comment">%Setting the number of columns</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,84" id="srcline84"> 84</a></span><span class="line"><span class="mxinfo " id="T1:U91"><span class="var type1" id="S3T1U136">tn</span>       = <span class="mxinfo " id="T1:U93">reshape(<span class="var type1" id="S22T3U139">t</span>,<span class="mxinfo " id="T2:U95">round(<span class="var type1" id="S27T2U142">nlin</span>)</span>,<span class="mxinfo " id="T2:U97">round(<span class="var type1" id="S28T2U145">ncol</span>)</span>)</span></span>;                             <span class="comment">%Reshaping the time vector to match the signal matriz</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,85" id="srcline85"> 85</a></span><span class="line"><span class="mxinfo " id="T1:U99"><span class="var type1" id="S2T1U148">olho_mat</span> = <span class="mxinfo " id="T1:U101">reshape(<span class="var type1" id="S7T3U151">Dados</span>,<span class="mxinfo " id="T2:U103">round(<span class="var type1" id="S27T2U154">nlin</span>)</span>,<span class="mxinfo " id="T2:U105">round(<span class="var type1" id="S28T2U157">ncol</span>)</span>)</span></span>;                         <span class="comment">%Reshaping the signal to an matriz</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,86" id="srcline86"> 86</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,87" id="srcline87"> 87</a></span><span class="line"><span class="comment">%% Resizing the income signal for measurement of the eye opening</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,88" id="srcline88"> 88</a></span><span class="line"><span class="mxinfo " id="T2:U107"><span class="var type1" id="S31T2U160">N1</span>     = <span class="var type1" id="S9T2U161">n_amos_p_sim</span></span>;                                                     <span class="comment">%Setting the number of lines of the new matriz</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,89" id="srcline89"> 89</a></span><span class="line"><span class="mxinfo " id="T2:U110"><span class="var type1" id="S32T2U164">N2</span>     = <span class="var type1" id="S20T2U165">N_sim</span></span>;                                                            <span class="comment">%Setting the number of columns</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,90" id="srcline90"> 90</a></span><span class="line"><span class="mxinfo " id="T1:U113"><span class="var type1" id="S33T1U168">olho</span>   = <span class="mxinfo " id="T1:U115">reshape(<span class="var type1" id="S7T3U171">Dados</span>,<span class="var type1" id="S31T2U172">N1</span>,<span class="var type1" id="S32T2U173">N2</span>)</span></span>;                                             <span class="comment">%Reshaping the signal to an matriz</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,91" id="srcline91"> 91</a></span><span class="line"><span class="mxinfo " id="T3:U119"><span class="var type1" id="S34T3U176">media</span>  = <span class="mxinfo " id="T3:U121">zeros(<span class="mxinfo " id="T2:U122">1</span>,<span class="var type1" id="S31T2U180">N1</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,92" id="srcline92"> 92</a></span><span class="line"><span class="mxinfo " id="T3:U124"><span class="var type1" id="S36T3U183">hi</span>     = <span class="mxinfo " id="T3:U126">zeros(<span class="mxinfo " id="T2:U127">1</span>,<span class="var type1" id="S31T2U187">N1</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,93" id="srcline93"> 93</a></span><span class="line"><span class="mxinfo " id="T3:U129"><span class="var type1" id="S37T3U190">low</span>    = <span class="mxinfo " id="T3:U131">zeros(<span class="mxinfo " id="T2:U132">1</span>,<span class="var type1" id="S31T2U194">N1</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,94" id="srcline94"> 94</a></span><span class="line"><span class="mxinfo " id="T3:U134"><span class="var type1" id="S38T3U197">Lhi</span>    = <span class="mxinfo " id="T3:U136">zeros(<span class="mxinfo " id="T2:U137">1</span>,<span class="var type1" id="S31T2U201">N1</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,95" id="srcline95"> 95</a></span><span class="line"><span class="mxinfo " id="T3:U139"><span class="var type1" id="S39T3U204">Llow</span>   = <span class="mxinfo " id="T3:U141">zeros(<span class="mxinfo " id="T2:U142">1</span>,<span class="var type1" id="S31T2U208">N1</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,96" id="srcline96"> 96</a></span><span class="line"><span class="mxinfo " id="T3:U144"><span class="var type1" id="S40T3U211">Ab</span>     = <span class="mxinfo " id="T3:U146">zeros(<span class="mxinfo " id="T2:U147">1</span>,<span class="var type1" id="S31T2U215">N1</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,97" id="srcline97"> 97</a></span><span class="line"><span class="comment">% Measuring the eye opening.</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,98" id="srcline98"> 98</a></span><span class="line"><span class="keyword">for</span> <span class="var type1" id="S41T2U218">ii</span> = <span class="mxinfo " id="T2:U150">1</span>:<span class="var type1" id="S31T2U221">N1</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,99" id="srcline99"> 99</a></span><span class="line">    <span class="comment">%Taking the mean value for the current sample for all symbols</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,100" id="srcline100">100</a></span><span class="line">    <span class="mxinfo " id="T2:U152"><span class="mxinfo " id="T2:U153"><span class="var type1" id="S34T3U225">media</span>(<span class="var type1" id="S41T2U226">ii</span>)</span> = <span class="mxinfo " id="T2:U156">mean(<span class="mxinfo " id="T3:U157"><span class="var type1" id="S33T1U230">olho</span>(<span class="var type1" id="S41T2U231">ii</span>,<span class="mxinfo " id="T5:U160">:</span>)</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,101" id="srcline101">101</a></span><span class="line">    <span class="comment">%Taking the points abouve the current mean value</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,102" id="srcline102">102</a></span><span class="line">    <span class="mxinfo " id="T3:U161"><span class="var type1" id="S43T3U235">nhi</span>       = <span class="mxinfo " id="T3:U163">find(<span class="mxinfo " id="T6:U164"><span class="mxinfo " id="T3:U165"><span class="var type1" id="S33T1U240">olho</span>(<span class="var type1" id="S41T2U241">ii</span>,<span class="mxinfo " id="T5:U168">:</span>)</span> &gt; <span class="mxinfo " id="T2:U169"><span class="var type1" id="S34T3U244">media</span>(<span class="var type1" id="S41T2U245">ii</span>)</span></span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,103" id="srcline103">103</a></span><span class="line">    <span class="comment">%Taking the points under the current mean value</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,104" id="srcline104">104</a></span><span class="line">    <span class="mxinfo " id="T3:U172"><span class="var type1" id="S45T3U248">nlow</span>      = <span class="mxinfo " id="T3:U174">find(<span class="mxinfo " id="T6:U175"><span class="mxinfo " id="T3:U176"><span class="var type1" id="S33T1U253">olho</span>(<span class="var type1" id="S41T2U254">ii</span>,<span class="mxinfo " id="T5:U179">:</span>)</span> &lt; <span class="mxinfo " id="T2:U180"><span class="var type1" id="S34T3U257">media</span>(<span class="var type1" id="S41T2U258">ii</span>)</span></span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,105" id="srcline105">105</a></span><span class="line">    <span class="comment">%Taking the mean value of the point abouve the the center of the simbol</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,106" id="srcline106">106</a></span><span class="line">    <span class="mxinfo " id="T2:U183"><span class="mxinfo " id="T2:U184"><span class="var type1" id="S36T3U262">hi</span>(<span class="var type1" id="S41T2U263">ii</span>)</span>    =  <span class="mxinfo " id="T2:U187">mean(<span class="mxinfo " id="T3:U188"><span class="var type1" id="S33T1U267">olho</span>(<span class="var type1" id="S41T2U268">ii</span>,<span class="var type1" id="S43T3U269">nhi</span>)</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,107" id="srcline107">107</a></span><span class="line">    <span class="comment">%Taking the mean value of the point under the the center of the simbol</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,108" id="srcline108">108</a></span><span class="line">    <span class="mxinfo " id="T2:U192"><span class="mxinfo " id="T2:U193"><span class="var type1" id="S37T3U273">low</span>(<span class="var type1" id="S41T2U274">ii</span>)</span>   =  <span class="mxinfo " id="T2:U196">mean(<span class="mxinfo " id="T3:U197"><span class="var type1" id="S33T1U278">olho</span>(<span class="var type1" id="S41T2U279">ii</span>,<span class="var type1" id="S45T3U280">nlow</span>)</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,109" id="srcline109">109</a></span><span class="line">    <span class="comment">%</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,110" id="srcline110">110</a></span><span class="line">    <span class="comment">%Taking highest point of the eye opening by subtracting the standart</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,111" id="srcline111">111</a></span><span class="line">    <span class="comment">%deviation from the mean value of the points abouve the center of the</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,112" id="srcline112">112</a></span><span class="line">    <span class="comment">%symble for the current sample.</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,113" id="srcline113">113</a></span><span class="line">    <span class="mxinfo " id="T2:U201"><span class="mxinfo " id="T2:U202"><span class="var type1" id="S38T3U284">Lhi</span>(<span class="var type1" id="S41T2U285">ii</span>)</span>   = <span class="mxinfo " id="T2:U205"><span class="mxinfo " id="T2:U206">mean(<span class="var type1" id="S36T3U289">hi</span>)</span>  - <span class="mxinfo " id="T2:U208">std(<span class="mxinfo " id="T3:U209"><span class="var type1" id="S33T1U293">olho</span>(<span class="var type1" id="S41T2U294">ii</span>,<span class="var type1" id="S43T3U295">nhi</span>)</span>)</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,114" id="srcline114">114</a></span><span class="line">    <span class="comment">%Taking lowest point of the eye opening by adding the standart</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,115" id="srcline115">115</a></span><span class="line">    <span class="comment">%deviation from the mean value of the points under the center of the</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,116" id="srcline116">116</a></span><span class="line">    <span class="comment">%symbol for the current sample.</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,117" id="srcline117">117</a></span><span class="line">    <span class="mxinfo " id="T2:U213"><span class="mxinfo " id="T2:U214"><span class="var type1" id="S39T3U299">Llow</span>(<span class="var type1" id="S41T2U300">ii</span>)</span>  = <span class="mxinfo " id="T2:U217"><span class="mxinfo " id="T2:U218">mean(<span class="var type1" id="S37T3U304">low</span>)</span> + <span class="mxinfo " id="T2:U220">std(<span class="mxinfo " id="T3:U221"><span class="var type1" id="S33T1U308">olho</span>(<span class="var type1" id="S41T2U309">ii</span>,<span class="var type1" id="S45T3U310">nlow</span>)</span>)</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,118" id="srcline118">118</a></span><span class="line">    <span class="comment">%Taking the eye opening by the diffeces between the uper level and the</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,119" id="srcline119">119</a></span><span class="line">    <span class="comment">%lower level.</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,120" id="srcline120">120</a></span><span class="line">    <span class="mxinfo " id="T2:U225"><span class="mxinfo " id="T2:U226"><span class="var type1" id="S40T3U314">Ab</span>(<span class="var type1" id="S41T2U315">ii</span>)</span>    = <span class="mxinfo " id="T2:U229"><span class="mxinfo " id="T2:U230"><span class="var type1" id="S38T3U318">Lhi</span>(<span class="var type1" id="S41T2U319">ii</span>)</span> - <span class="mxinfo " id="T2:U233"><span class="var type1" id="S39T3U321">Llow</span>(<span class="var type1" id="S41T2U322">ii</span>)</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,121" id="srcline121">121</a></span><span class="line"><span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,122" id="srcline122">122</a></span><span class="line"><span class="comment">%The final values to be exported outside this function are based on the</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,123" id="srcline123">123</a></span><span class="line"><span class="comment">%mean value calculated above.</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,124" id="srcline124">124</a></span><span class="line"><span class="mxinfo " id="T2:U236"><span class="var type1" id="S4T2U325">Olho_Aber</span>   = <span class="mxinfo " id="T2:U238">mean(<span class="var type1" id="S40T3U328">Ab</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,125" id="srcline125">125</a></span><span class="line"><span class="mxinfo " id="T2:U240"><span class="var type1" id="S5T2U331">Aber_Lhi</span>    = <span class="mxinfo " id="T2:U242">mean(<span class="var type1" id="S38T3U334">Lhi</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,126" id="srcline126">126</a></span><span class="line"><span class="mxinfo " id="T2:U244"><span class="var type1" id="S6T2U337">Aber_Llow</span>   = <span class="mxinfo " id="T2:U246">mean(<span class="var type1" id="S39T3U340">Llow</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,127" id="srcline127">127</a></span><span class="line"><span class="comment">% if (nargout == 0),</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,128" id="srcline128">128</a></span><span class="line"><span class="comment">%   maxolho = max(max(pulse));</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,129" id="srcline129">129</a></span><span class="line"><span class="comment">%   minolho = min(min(pulse));</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,130" id="srcline130">130</a></span><span class="line"><span class="comment">%   x       = linspace(minolho,maxolho,50);</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,131" id="srcline131">131</a></span><span class="line"><span class="comment">%   y       = hist(pulse,x);</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,132" id="srcline132">132</a></span><span class="line"><span class="comment">%   subplot('position',[0.10 0.09 0.15 0.85]),barh(x,y)</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,133" id="srcline133">133</a></span><span class="line"><span class="comment">%   grid on,ylabel('Amplitude [u.a]')</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,134" id="srcline134">134</a></span><span class="line"><span class="comment">%   subplot('position',[0.33 0.09 0.60 0.85])</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,135" id="srcline135">135</a></span><span class="line"><span class="comment">%   plot(Tolho/1E-12,olho,'r','LineWidth',1)</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,136" id="srcline136">136</a></span><span class="line"><span class="comment">%   grid on,xlabel('Tempo [ps]'),<span class="keyword">...</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,137" id="srcline137">137</a></span><span class="line"><span class="comment">%   ylabel(sprintf('Abertura do diagrama de olho:  %2.5f [u.a]',Abertura))</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,138" id="srcline138">138</a></span><span class="line"><span class="comment">% end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,139" id="srcline139">139</a></span><span class="line"><span class="comment">%% Ploting the Eye Diagram </span></span></span>
<span class="srcline"><span class="lineno"><a href="1,140" id="srcline140">140</a></span><span class="line"><span class="comment">% if ploting</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,141" id="srcline141">141</a></span><span class="line"><span class="comment">%     figure;</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,142" id="srcline142">142</a></span><span class="line"><span class="comment">%     hold all;</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,143" id="srcline143">143</a></span><span class="line"><span class="comment">%     maxolho = max(max(Dados));</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,144" id="srcline144">144</a></span><span class="line"><span class="comment">%     minolho = min(min(Dados));</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,145" id="srcline145">145</a></span><span class="line"><span class="comment">%     x       = linspace(minolho,maxolho,50);</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,146" id="srcline146">146</a></span><span class="line"><span class="comment">%     y       = hist(Dados,x);</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,147" id="srcline147">147</a></span><span class="line"><span class="comment">%     subplot('position',[0.10 0.09 0.15 0.85]),barh(x,y)</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,148" id="srcline148">148</a></span><span class="line"><span class="comment">%     grid on,ylabel('Amplitude [u.a]')</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,149" id="srcline149">149</a></span><span class="line"><span class="comment">%     subplot('position',[0.33 0.09 0.60 0.85])</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,150" id="srcline150">150</a></span><span class="line"><span class="comment">% %     for kk=1:length(olho_mat(1,:))</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,151" id="srcline151">151</a></span><span class="line"><span class="comment">% %        plot(tn(:,1),(olho_mat(:,kk)),'r');</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,152" id="srcline152">152</a></span><span class="line"><span class="comment">%        plot(tn(:,1),(olho_mat),'r');</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,153" id="srcline153">153</a></span><span class="line"><span class="comment">%     %    plot(tn(round(n_amos_p_sim/2),1),olho_mat(round(n_amos_p_sim/2),kk),'ob')</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,154" id="srcline154">154</a></span><span class="line"><span class="comment">% %     end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,155" id="srcline155">155</a></span><span class="line"><span class="comment">%     grid on;</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,156" id="srcline156">156</a></span><span class="line"><span class="comment">%     xlabel('Tempo [s]'),ylabel(sprintf('Abertura do diagrama de olho:  %2.5f [u.a]',Olho_Aber))</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,157" id="srcline157">157</a></span><span class="line"><span class="comment">%     set(gcf,'units','normalized','outerposition',[0 0 1 1]);</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,158" id="srcline158">158</a></span><span class="line"><span class="comment">% end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,159" id="srcline159">159</a></span><span class="line"><span class="comment">% ylim([1.1*Dmin 1.1*Dmax]);</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,160" id="srcline160">160</a></span><span class="line"><span class="comment">% warning on;</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,161" id="srcline161">161</a></span><span class="line"><span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,162" id="srcline162">162</a></span><span class="line"></span></span>
</pre>
